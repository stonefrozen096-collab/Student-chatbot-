<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Dashboard</title>
<link rel="stylesheet" href="css/common.css">
<style>
  body { font-family:"Segoe UI",sans-serif; background:#f4f6f9; margin:0; padding:0; }
  .container { max-width: 1000px; margin: 30px auto; padding:20px; background:#fff; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1); }
  h2,h3,h4 { margin:5px 0; color:#0f172a; }
  .section { margin-bottom:25px; }
  .profile-info p { margin:2px 0; color:#475569; }
  .list-item { padding:5px 0; border-bottom:1px solid #e5e7eb; }
  input,textarea,select,button { width:100%; padding:10px; margin:5px 0; border-radius:8px; border:1px solid #d1d5db; outline:none; }
  button.primary-btn { background:#4f46e5;color:#fff;font-weight:bold;border:none;cursor:pointer;transition:0.3s; }
  button.primary-btn:hover { transform:scale(1.03); }
  canvas { max-width:100%; margin-top:10px; }
  #chatbot { border:1px solid #d1d5db; border-radius:8px; padding:10px; max-height:300px; overflow-y:auto; background:#f9fafb; margin-top:10px; }
  .chat-msg { margin:5px 0; }
  .chat-msg.user { color:#2563eb; }
  .chat-msg.bot { color:#10b981; }
</style>
</head>
<body>
<div class="container">
  <!-- Profile -->
  <div class="section profile-info">
    <h2 id="studentName">Hari Prasath</h2>
    <p><strong>Reg No:</strong> DME123</p>
    <p><strong>Email:</strong> hari@example.com</p>
    <p><strong>Roles:</strong> STUDENT/TESTER</p>
    <button class="primary-btn" onclick="logout()">Logout</button>
  </div>

  <!-- Assigned Faculty -->
  <div class="section">
    <h3>Assigned Faculty</h3>
    <div class="list-item">Mr. John Doe</div>
    <div class="list-item">Ms. Jane Smith</div>
  </div>

  <!-- Attendance Summary -->
  <div class="section">
    <h3>Attendance Summary</h3>
    <div id="attendanceList"></div>
  </div>

  <!-- Notes -->
  <div class="section">
    <h3>Notes</h3>
    <div id="notesList"></div>
  </div>

  <!-- Tests / Assignments -->
  <div class="section">
    <h3>Tests / Assignments</h3>
    <div id="testList"></div>
  </div>

  <!-- Notices -->
  <div class="section">
    <h3>Notices</h3>
    <div id="noticeList"></div>
  </div>

  <!-- Feedback -->
  <div class="section">
    <h3>Submit Feedback</h3>
    <label for="feedbackSubject">Subject</label>
    <input type="text" id="feedbackSubject" placeholder="Enter subject">
    <textarea id="feedbackText" rows="2" placeholder="Write your feedback here..."></textarea>
    <button class="primary-btn" onclick="submitFeedback()">Send Feedback</button>
    <h4>Feedback Responses</h4>
    <div id="feedbackResponses"></div>
  </div>

  <!-- Charts -->
  <div class="section">
    <h3>Performance Charts</h3>
    <canvas id="testChart"></canvas>
    <canvas id="attendanceChart"></canvas>
    <canvas id="completionChart"></canvas>
  </div>

  <!-- Chatbot -->
  <div class="section">
    <h3>Chatbot Assistant</h3>
    <div id="chatbot"></div>
    <input type="text" id="chatbotInput" placeholder="Ask me anything...">
    <button class="primary-btn" id="chatbotSendBtn">Send</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Sample Data
  const attendanceData = [
    {subject:'Maths', percent:95},
    {subject:'Physics', percent:90},
    {subject:'Mechanics', percent:92}
  ];
  const notesData = [
    {title:'Chapter 5 summary', faculty:'Mr. John Doe'},
    {title:'Lab instructions', faculty:'Ms. Jane Smith'}
  ];
  const testData = [
    {title:'Math Assignment 3'},
    {title:'Physics Lab Report'}
  ];
  const noticeData = [
    'Extra classes on Friday',
    'Submission deadline extended'
  ];
  const feedbackData = [];
  const feedbackResponses = [
    'Request for extra classes (Mr. John Doe): Scheduled on Friday',
    'Assignment submission issue (Ms. Jane Smith): Received late submission'
  ];

  const triggers = [
    {word:'hello', reply:'hello ðŸ‘‹ how can I help you?'},
    {word:'hi', reply:'Hi there! How can I assist you?'}
  ];

  // Render Functions
  function renderAttendance() {
    const container = document.getElementById('attendanceList');
    container.innerHTML = '';
    attendanceData.forEach(a => {
      const div = document.createElement('div');
      div.className='list-item';
      div.textContent = `${a.subject} - ${a.percent}%`;
      container.appendChild(div);
    });
  }

  function renderNotes() {
    const container = document.getElementById('notesList');
    container.innerHTML = '';
    notesData.forEach(n=>{
      const div=document.createElement('div');
      div.className='list-item';
      div.textContent=`${n.title} by ${n.faculty}`;
      container.appendChild(div);
    });
  }

  function renderTests() {
    const container=document.getElementById('testList');
    container.innerHTML='';
    testData.forEach(t=>{
      const div=document.createElement('div');
      div.className='list-item';
      div.textContent=t.title;
      container.appendChild(div);
    });
  }

  function renderNotices() {
    const container=document.getElementById('noticeList');
    container.innerHTML='';
    noticeData.forEach(n=>{
      const div=document.createElement('div');
      div.className='list-item';
      div.textContent=n;
      container.appendChild(div);
    });
  }

  function renderFeedback() {
    const container=document.getElementById('feedbackResponses');
    container.innerHTML='';
    feedbackResponses.forEach(f=>{
      const div=document.createElement('div');
      div.className='list-item';
      div.textContent=f;
      container.appendChild(div);
    });
  }

  function submitFeedback() {
    const subject=document.getElementById('feedbackSubject').value;
    const text=document.getElementById('feedbackText').value;
    if(subject && text) {
      feedbackData.push({subject,text});
      alert('Feedback submitted!');
      document.getElementById('feedbackSubject').value='';
      document.getElementById('feedbackText').value='';
      renderFeedback();
    }
  }

  // Charts
  const testChart=new Chart(document.getElementById('testChart'),{
    type:'bar',
    data:{
      labels:testData.map(t=>t.title),
      datasets:[{label:'Scores', data:[80,90], backgroundColor:'#2563eb'}]
    }
  });

  const attendanceChart=new Chart(document.getElementById('attendanceChart'),{
    type:'pie',
    data:{
      labels:attendanceData.map(a=>a.subject),
      datasets:[{data:attendanceData.map(a=>a.percent), backgroundColor:['#4f46e5','#3b82f6','#16a34a']}]
    }
  });

  const completionChart=new Chart(document.getElementById('completionChart'),{
    type:'doughnut',
    data:{
      labels:['Completed','Pending'],
      datasets:[{data:[12,3], backgroundColor:['#10b981','#f59e0b']}]
    }
  });

  // Chatbot
  const chatbotContainer = document.getElementById('chatbot');
  const chatbotInput = document.getElementById('chatbotInput');
  const chatbotSendBtn = document.getElementById('chatbotSendBtn');

  function addChatMessage(msg, sender) {
    const div = document.createElement('div');
    div.className = 'chat-msg ' + sender;
    div.textContent = msg;
    chatbotContainer.appendChild(div);
    chatbotContainer.scrollTop = chatbotContainer.scrollHeight;
  }

  chatbotSendBtn.addEventListener('click', () => {
    const userMsg = chatbotInput.value.trim();
    if(!userMsg) return;
    addChatMessage('You: ' + userMsg, 'user');
    chatbotInput.value = '';

    // Check triggers
    const trigger = triggers.find(t => userMsg.toLowerCase().includes(t.word.toLowerCase()));
    if(trigger) {
      addChatMessage('Bot: ' + trigger.reply, 'bot');
    } else {
      addChatMessage('Bot: I have received your query.', 'bot');
    }
  });

  chatbotInput.addEventListener('keypress', e => {
    if(e.key==='Enter') chatbotSendBtn.click();
  });

  function logout() {
    alert('Logging out...');
    window.location.href='index.html';
  }

  // Initialize
  renderAttendance();
  renderNotes();
  renderTests();
  renderNotices();
  renderFeedback();
</script>
</body>
</html>

  
