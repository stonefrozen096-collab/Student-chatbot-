<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="admin.css">
  <link rel="stylesheet" href="animation.css">
</head>
<body>
  <!-- Sidebar Navigation -->
  <nav id="sidebar">
    <h1>Admin Panel</h1>
    <ul>
      <li><a href="#" data-section="users">User Management</a></li>
      <li><a href="#" data-section="badges">Badge Management</a></li>
      <li><a href="#" data-section="attendance">Attendance</a></li>
      <li><a href="#" data-section="tests">Test Management</a></li>
      <li><a href="#" data-section="notices">Notices</a></li>
      <li><a href="#" data-section="profile">Profile Management</a></li>
      <li><a href="#" data-section="triggers">Chatbot Triggers</a></li>
      <li><a href="#" data-section="commands">Master Commands</a></li>
      <li><a href="#" data-section="charts">Analytics</a></li>
      <li><a href="#" data-section="importExport">Import / Export</a></li>
    </ul>
  </nav>

  <!-- Main Content -->
  <main id="mainContent">
    <h2>Welcome, Admin!</h2>
    <p>Select a section from the sidebar to start managing.</p>
  </main>

  <!-- JS References -->
  <script src="main.js"></script>
  <script src="admin.js"></script>
</body>
</html>
<!-- USERS SECTION -->
<section id="users" class="admin-section" style="display:none;">
  <h2>User Management</h2>
  
  <!-- Add User Form -->
  <form id="addUserForm" class="card animated-card">
    <label>Name:</label>
    <input type="text" id="userName" required placeholder="Full Name">

    <label>Username:</label>
    <input type="text" id="userUsername" required placeholder="Username">

    <label>Role:</label>
    <select id="userRole">
      <option value="student">Student</option>
      <option value="faculty">Faculty</option>
      <option value="moderator">Moderator</option>
      <option value="tester">Tester</option>
    </select>

    <label id="passwordLabel" style="display:none;">Password (for Faculty):</label>
    <input type="password" id="userPassword" style="display:none;" placeholder="Enter password">

    <button type="submit" class="btn btn-primary">Add User</button>
  </form>

  <!-- List of Users -->
  <div id="userList" class="list animated-list"></div>
</section>
<!-- BADGES SECTION -->
<section id="badges" class="admin-section" style="display:none;">
  <h2>Badge Management</h2>

  <!-- Create Badge Form -->
  <form id="addBadgeForm" class="card animated-card">
    <label>Badge Name:</label>
    <input type="text" id="badgeName" required placeholder="Badge Name">

    <label>Effects:</label>
    <select id="badgeEffects" multiple>
      <option value="highlight">Highlight</option>
      <option value="special-access">Special Access</option>
      <option value="priority">Priority</option>
      <option value="glow">Glow</option>
    </select>

    <button type="submit" class="btn btn-primary">Create Badge</button>
  </form>

  <!-- List of Badges -->
  <div id="badgeList" class="list animated-list"></div>

  <!-- Assign Badge -->
  <h3>Assign Badge to User</h3>
  <div class="card animated-card" style="padding:12px;">
    <label>Select User:</label>
    <select id="assignBadgeUser"><option value="">Select User</option></select>

    <label>Select Badge:</label>
    <select id="assignBadgeSelect"><option value="">Select Badge</option></select>

    <button class="btn btn-success" onclick="assignBadge()">Assign Badge</button>
  </div>
</section>
<!-- MASTER COMMANDS & TRIGGERS SECTION -->
<section id="commands-triggers" class="admin-section" style="display:none;">
  <h2>Master Commands & Trigger Words</h2>

  <!-- Trigger Words -->
  <div class="card animated-card">
    <h3>Chatbot Trigger Words / Phrases</h3>
    <form id="triggerForm">
      <label>Trigger Word / Phrase</label>
      <input type="text" id="triggerInput" placeholder="e.g. hello, need help" required>

      <label>Response</label>
      <input type="text" id="responseInput" placeholder="Response for this trigger" required>

      <div style="margin-top:10px; display:flex; gap:8px;">
        <button type="submit" class="btn btn-primary">Add Trigger</button>
        <button type="button" class="btn btn-ghost" onclick="renderTriggers()">Refresh</button>
      </div>
    </form>

    <div class="space"></div>
    <div class="muted small">Current Triggers</div>
    <div id="triggerList" class="list animated-list"></div>
  </div>

  <!-- Master Commands -->
  <div class="card animated-card" style="margin-top:20px;">
    <h3>Master Command Tab</h3>
    <form id="masterForm">
      <label>Command Name</label>
      <input type="text" id="commandName" placeholder="e.g. lockAll, deleteAll" required>

      <label>Action / JS Code</label>
      <textarea id="commandAction" placeholder="JavaScript code to execute" required></textarea>

      <div style="margin-top:10px; display:flex; gap:8px;">
        <button type="submit" class="btn btn-primary">Add Command</button>
        <button type="button" class="btn btn-ghost" onclick="renderMasterCommands()">Refresh</button>
      </div>
    </form>

    <div class="space"></div>
    <div class="muted small">Current Master Commands</div>
    <div id="masterList" class="list animated-list"></div>
  </div>
</section>
<!-- NOTICE SECTION -->
<section id="notices-section" class="admin-section" style="display:none;">
  <h2>Notices & Announcements</h2>
  
  <div class="card animated-card">
    <form id="noticeForm">
      <label>Notice Title</label>
      <input type="text" id="noticeTitle" placeholder="Title" required>

      <label>Notice Content</label>
      <textarea id="noticeContent" placeholder="Write your notice..." required></textarea>

      <label>Assign to</label>
      <select id="noticeAssign">
        <option value="all">All Students</option>
      </select>

      <div style="margin-top:10px; display:flex; gap:8px;">
        <button type="submit" class="btn btn-primary">Post Notice</button>
        <button type="button" class="btn btn-ghost" onclick="renderNotices()">Refresh</button>
      </div>
    </form>

    <div class="space"></div>
    <div class="muted small">All Notices</div>
    <div id="noticeList" class="list animated-list"></div>
  </div>
</section>

<!-- PROFILE MANAGEMENT SECTION -->
<section id="profile-section" class="admin-section" style="display:none;">
  <h2>Profile Management</h2>
  
  <div class="card animated-card">
    <form id="profileSearchForm">
      <label>Search User</label>
      <input type="text" id="profileSearchInput" placeholder="Enter username or name">

      <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <div class="space"></div>
    <div id="profileResult" class="list animated-list"></div>
  </div>
</section>
<!-- ATTENDANCE SECTION -->
<section id="attendance-section" class="admin-section" style="display:none;">
  <h2>Attendance Management</h2>
  
  <div class="card animated-card">
    <div class="attendance-header" style="display:flex;justify-content:space-between;align-items:center;">
      <div id="attendanceDateTime"></div>
      <button class="btn btn-primary" onclick="saveAttendance()">Save Attendance</button>
    </div>

    <div class="space"></div>

    <table class="attendance-table">
      <thead>
        <tr>
          <th>Student</th>
          <th>Present</th>
          <th>Absent</th>
          <th>Late</th>
          <th>On Duty</th>
        </tr>
      </thead>
      <tbody id="attendanceList"></tbody>
    </table>

    <div class="space"></div>
    <div class="muted small">Attendance is automatically saved to <code>Attendance.json</code></div>
  </div>
</section>
<!-- TEST CREATION SECTION -->
<section id="test-section" class="admin-section" style="display:none;">
  <h2>Test Creation</h2>

  <div class="card animated-card">
    <form id="createTestForm">
      <label>Test Type</label>
      <select id="testTypeSelect">
        <option value="mcq">MCQ</option>
        <option value="short">Short Answer</option>
      </select>

      <label>Subject</label>
      <input type="text" id="testSubjectInput" placeholder="Subject e.g. Math" required>

      <label>Question</label>
      <textarea id="testQuestionInput" placeholder="Enter the question..." required></textarea>

      <!-- MCQ Options -->
      <div id="mcqOptionsContainer" style="display:none;">
        <label>Options</label>
        <div id="mcqOptionsList"></div>
        <button type="button" class="btn btn-ghost" onclick="addMCQOption()">Add Option</button>

        <label>Correct Answer</label>
        <select id="mcqAnswerSelect"><option value="">Select correct answer</option></select>
      </div>

      <label>Assign to student</label>
      <select id="testAssignStudent"><option value="">All Students</option></select>

      <div style="margin-top:10px; display:flex; gap:8px;">
        <button type="submit" class="btn btn-primary">Add Test</button>
        <button type="button" class="btn btn-ghost" onclick="renderCreatedTests()">Refresh</button>
      </div>
    </form>

    <div class="space"></div>
    <div class="muted small">Created Tests</div>
    <div id="createdTestList" class="list"></div>
  </div>
</section>
<!-- PROFILE MANAGEMENT SECTION -->
<div id="profileSection" class="admin-section" style="display:none;">
  <h2>Profile Management</h2>

  <!-- Admin Own Profile -->
  <div class="card">
    <h3>Edit Your Profile</h3>
    <form id="editAdminProfileForm">
      <label>Name:</label><input type="text" id="adminName" required>
      <label>Username:</label><input type="text" id="adminUsername" required>
      <label>Password:</label><input type="password" id="adminPassword">
      <button type="submit">Update Profile</button>
    </form>
  </div>

  <hr>

  <!-- Search and View Other Users -->
  <div class="card">
    <h3>Search Users</h3>
    <input type="text" id="searchUserInput" placeholder="Enter username or name">
    <button onclick="searchUser()">Search</button>
    <div id="searchResults" class="list"></div>
  </div>
</div>
// Example data objects (replace with your JSON fetching logic)
let users = []; 
let badges = []; 
let attendance = [];
let tests = [];

// ----- IMPORT FUNCTION -----
function importData() {
  const fileInput = document.getElementById('importFile');
  const type = document.getElementById('importSelect').value;

  if (!fileInput.files.length) return alert('Select a JSON file');

  const file = fileInput.files[0];
  const reader = new FileReader();
  
  reader.onload = function(e) {
    try {
      const data = JSON.parse(e.target.result);
      if (!Array.isArray(data)) throw 'Invalid JSON format';

      switch(type){
        case 'users': users = data; break;
        case 'badges': badges = data; break;
        case 'attendance': attendance = data; break;
        case 'tests': tests = data; break;
      }
      alert(`${type} imported successfully`);
      renderAll(); // optional: refresh UI if needed
    } catch(err) {
      alert('Failed to import JSON: ' + err);
    }
  };
  reader.readAsText(file);
}

// ----- EXPORT FUNCTION -----
function exportData() {
  const type = document.getElementById('exportSelect').value;
  let data;
  switch(type){
    case 'users': data = users; break;
    case 'badges': data = badges; break;
    case 'attendance': data = attendance; break;
    case 'tests': data = tests; break;
  }

  const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `${type}.json`;
  a.click();
  URL.revokeObjectURL(url);
}
